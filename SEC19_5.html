
<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Svenska eHockey Cupen 19.5</title>

  <style>
.player-link {
    color: #fff !important;        /* vit text */
    text-decoration: none !important;
}

.player-link:hover {
    opacity: 0.7;                  /* valfri hover-effekt */
}

    :root {
      --sec-bg-deep: #02030a;
      --sec-bg-top: #080f24;
      --sec-gold: #d6b15f;
      --sec-gold-soft: #f0d58b;
      --sec-text-main: #e3e4f2;
      --sec-text-muted: #b4b7d8;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", sans-serif;
      background: #000;
      color: var(--sec-text-main);
      min-height: 100vh;
    }

    body {
      display: flex;
      justify-content: center;
    }

    /* Bakgrund + r√∂krid√• */
    #sec-bg-layer {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: -2;
      background:
        radial-gradient(circle at 0% 0%, rgba(214,177,95,0.17) 0, transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(88,120,255,0.16) 0, transparent 55%),
        radial-gradient(circle at 50% 100%, #010314 0, #000 70%);
    }

    .smoke-layer {
      position: absolute;
      inset: -20%;
      pointer-events: none;
      background:
        radial-gradient(circle at 20% 20%, rgba(120,140,200,0.12) 0, transparent 45%),
        radial-gradient(circle at 80% 30%, rgba(120,140,200,0.10) 0, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(80,100,160,0.12) 0, transparent 45%);
      opacity: 0;
      animation: smokeFade 1.4s ease forwards 0.8s, smokeDrift 40s linear infinite;
      mix-blend-mode: screen;
    }

    .smoke-layer.smoke-back {
      filter: blur(22px);
      opacity: 0;
      animation: smokeFade 1.8s ease forwards 1s, smokeDrift 55s linear infinite;
    }

    @keyframes smokeFade {
      from { opacity: 0; }
      to   { opacity: 0.4; }
    }

    @keyframes smokeDrift {
      0%   { transform: translate3d(0,0,0) scale(1); }
      50%  { transform: translate3d(-4%, -2%, 1px) scale(1.05); }
      100% { transform: translate3d(3%, 3%, 0) scale(1); }
    }

    #sec-page {
      position: relative;
      width: 100%;
      max-width: 1200px;
      padding: 20px 12px 80px;
      z-index: 1;
      animation: pageFade .6s ease-out;
    }

    @keyframes pageFade {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* HEADER */
    .sfc-header {
      margin-top: 12px;
      border-radius: 22px;
      padding: 26px 16px 22px;
      background:
        linear-gradient(145deg, rgba(255,255,255,0.05), transparent 40%),
        radial-gradient(circle at top, #151b3f 0, #050614 55%, #02030a 100%);
      border: 1px solid rgba(214,177,95,0.6);
      box-shadow: 0 20px 60px rgba(0,0,0,0.95);
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .sfc-header::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 50% 0%, rgba(214,177,95,0.24) 0, transparent 55%);
      opacity: 0.4;
      mix-blend-mode: screen;
      pointer-events: none;
    }

    .sfc-logo {
      width: 165px;
      filter: drop-shadow(0 0 20px rgba(214,177,95,0.7));
      position: relative;
      z-index: 1;
    }

    .sfc-title {
      position: relative;
      z-index: 1;
      font-weight: 800;
      font-size: clamp(1.3rem, 2.6vw, 1.7rem);
      letter-spacing: .18em;
      text-transform: uppercase;
      color: #fdfbff;
      margin-top: 4px;
    }

    .sfc-title strong {
      color: var(--sec-gold-soft);
    }

    .sfc-divider {
      position: relative;
      z-index: 1;
      width: 180px;
      height: 3px;
      border-radius: 999px;
      margin: 18px auto 0;
      background: linear-gradient(90deg, transparent, var(--sec-gold-soft), transparent);
      box-shadow: 0 0 15px rgba(214,177,95,0.8);
    }

    .sfc-reflection {
      position: absolute;
      left: 50%;
      bottom: -6px;
      width: 60%;
      height: 26px;
      transform: translateX(-50%);
      background: radial-gradient(ellipse at top, rgba(214,177,95,0.38) 0, transparent 60%);
      opacity: 0.45;
      filter: blur(6px);
      pointer-events: none;
    }

    /* TABS */
    .cup-tabs {
      margin-top: 20px;
      border-radius: 999px;
      background: rgba(2,4,12,0.94);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(214,177,95,0.35);
      box-shadow: 0 14px 34px rgba(0,0,0,0.95);
      padding: 7px 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 4px;
    }

    .cup-tabs .tab {
      border-radius: 999px;
      border: none;
      background: transparent;
      color: var(--sec-text-muted);
      font-size: .8rem;
      padding: 9px 16px;
      text-transform: uppercase;
      letter-spacing: .09em;
      font-weight: 600;
      cursor: pointer;
      transition: background .2s ease, color .2s ease, box-shadow .2s ease, transform .15s ease;
    }

    .cup-tabs .tab:hover {
      background: rgba(255,255,255,0.05);
      transform: translateY(-1px);
    }

    .cup-tabs .tab.active {
      background: linear-gradient(90deg, var(--sec-gold), var(--sec-gold-soft));
      color: #181933;
      box-shadow: 0 0 18px rgba(214,177,95,0.65);
      transform: translateY(-1px);
    }

    /* PANELER */
.tab-panel {
  margin-top: 26px;
  border-radius: 22px;
  background:
    radial-gradient(circle at top, rgba(255,255,255,0.04) 0, transparent 55%),
    radial-gradient(circle at 0% 100%, rgba(214,177,95,0.14) 0, transparent 55%),
    linear-gradient(180deg, #060715, #02030a 60%, #000 100%);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 24px 20px 26px;
  box-shadow: 0 18px 42px rgba(0,0,0,0.95);
  color: var(--sec-text-main);
  animation: panelFade .4s ease;
  display: none;           /* üëà G√∂m alla paneler som standard */
}

/* Endast aktiv panel syns */
.tab-panel.active {
  display: block;
}

/* FOOTER ‚Äì Dark Arena Premium */
#sec-footer-wrapper {
  margin-top: 100px;
  text-align: center;
  position: relative;
  z-index: 2;
  max-width: 1100px;
  margin-inline: auto;
  padding: 60px 0 40px;
  background: radial-gradient(circle at top center, rgba(255,215,100,0.04) 0%, transparent 80%);
  border-top: 1px solid rgba(214,177,95,0.15);
  border-radius: 12px 12px 0 0;
  box-shadow: 0 -6px 18px rgba(0,0,0,0.45);
}

.sec-footer-glow {
  position: absolute;
  top: -40px;
  left: 50%;
  width: 420px;
  height: 140px;
  transform: translateX(-50%);
  background: radial-gradient(circle at center, rgba(214,177,95,0.2) 0%, transparent 75%);
  filter: blur(32px);
  pointer-events: none;
  opacity: 0.8;
}

#sec-footer-line {
  width: 320px;
  height: 2px;
  margin: 0 auto 14px;
  background: linear-gradient(90deg, transparent, var(--sec-gold-soft), transparent);
  box-shadow: 0 0 10px rgba(214,177,95,0.7);
  opacity: 0.9;
}

#sec-footer-text {
  font-size: 0.88rem;
  letter-spacing: 0.13em;
  text-transform: uppercase;
  color: rgba(230,230,240,0.9);
  font-weight: 500;
  text-shadow: 0 0 4px rgba(255, 215, 100, 0.15);
}

#sec-footer-text span {
  color: var(--sec-gold-soft);
  font-weight: 600;
  transition: color 0.3s ease, text-shadow 0.3s ease;
}

#sec-footer-text span:hover {
  color: #f6e8b0;
  text-shadow: 0 0 10px rgba(255, 220, 130, 0.4);
}
/* FOOTER ‚Äì Scroll Fade-in */
#sec-footer-wrapper {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 1.2s ease, transform 1.2s ease;
}

#sec-footer-wrapper.visible {
  opacity: 1;
  transform: translateY(0);
}

/* === TEAM GRID === */
.team-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* üîß √Ñndra till 2 eller 4 f√∂r fler/f√§rre per rad */
  gap: 1.5rem;
  margin-top: 2rem;
  justify-items: center;
}

/* === TEAM CARD === */
.team-card {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 215, 0, 0.06));
  border: 1px solid rgba(255, 215, 0, 0.2);
  border-radius: 18px;
  text-align: center;
  padding: 18px;
  width: 250px;
  transition: all 0.25s ease;
  cursor: pointer;
}

.team-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 0 25px rgba(255, 215, 0, 0.25);
}

/* === LOGO === */
.team-logo img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255, 215, 0, 0.25);
  margin-bottom: 10px;
}

/* === TEXT === */
.team-card h3 {
  color: #fff;
  font-weight: 600;
  margin: 8px 0;
}

.team-card p {
  font-size: 0.9rem;
  color: #ddd;
  line-height: 1.4;
}

/* Responsiv layout (mobilv√§nlig) */
@media (max-width: 900px) {
  .team-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 600px) {
  .team-grid {
    grid-template-columns: 1fr;
  }
}


  
/* --- Flikar (lagvy) --- */
.stat-tabs {
  display: flex;
  justify-content: center;
  margin: 16px 0 28px;
  gap: 12px;
}
.stat-tabs .tab {
  padding: 8px 16px;
  border: 2px solid #0b1a49;
  border-radius: 8px;
  background: #fff;
  color: #0b1a49;
  font: 600 14px/1.2 Inter, system-ui, Arial;
  cursor: pointer;
  transition: all 0.2s;
}
.stat-tabs .tab:hover {
  background: #f4f7ff;
}
.stat-tabs .tab.active {
  background: #0b1a49;
  color: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,.1);
}

/* --- Lagstatistik ‚Äì tabeller --- */
.team-view table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font: 14px/1.3 Inter,system-ui,Arial,sans-serif;
}
.team-view thead th {
  position: sticky;
  top: 0;
  background: #0b1a49;
  color: #d6b15f;
  padding: 10px 8px;
  text-align: right;
}
.team-view thead th:nth-child(1),
.team-view thead th:nth-child(2){text-align:left}
.team-view tbody td{padding:10px 8px;border-bottom:1px solid #e9eef5;text-align:right}
.team-view tbody td:nth-child(1),
.team-view tbody td:nth-child(2){text-align:left}
.team-view .wrap{background:#fff;border-radius:12px;overflow-x:auto;box-shadow:0 6px 18px rgba(0,0,0,.08)}
.team-view h2{font:600 18px/1.2 Inter,system-ui,Arial;margin:18px 4px 8px}
.team-view .sep{height:12px}

/* --- Lagmatcher (per lag) --- */
.match-container {
  display: flex;
  flex-direction: column;
  gap: 24px;
  margin-bottom: 30px;
}
.match-block {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  overflow: hidden;
}
.match-date {
  background: #0b1a49;
  color: #fff;
  padding: 10px 14px;
  font-weight: 700;
  font-size: 15px;
}
.match-round {
  background: #666;
  color: #fff;
  padding: 8px 14px;
  font-weight: 600;
  font-size: 14px;
}
.match-table {
  width: 100%;
  border-collapse: collapse;
  font: 15px/1.4 Inter, system-ui, Arial;
}
.match-table td {
  padding: 10px 16px;
  border-bottom: 1px solid #eaeef5;
}
.match-table tr:last-child td {
  border-bottom: none;
}
.match-time {
  color: #555;
  font-weight: 500;
  width: 15%;
}
.match-team {
  width: 35%;
  font-weight: 600;
}
.match-score {
  text-align: center;
  width: 20%;
  font-weight: 600;
  color: #0b1a49;
  position: relative;
}
.match-score .ot {
  display: block;
  font-size: 12px;
  color: #777;
  font-weight: 500;
  margin-top: 2px;
  text-align: center;
}
.match-team.winner {
  font-weight: 700;
  color: #0b1a49;
}
/* üîí F√∂rhindra sidleds-scroll p√• mobilen */
html, body {
  overflow-x: hidden;
  width: 100%;
  max-width: 100%;
}
.bracket-wrapper {
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
    padding: 20px 16px;
    box-sizing: border-box;
}

.bracket-box {
    background: linear-gradient(180deg, #1a1a1a, #0f0f0f);
    border: 2px solid rgba(255, 215, 0, 0.35);
    border-radius: 18px;
    padding: 25px 18px;
    margin-bottom: 30px;
    box-sizing: border-box;
}

.final-section {
    margin-top: 40px;
    text-align: center;
}

.final-match {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    font-size: 1.15rem;
}

.champion-box {
    margin-top: 40px;
    background: #0d0d1a;
    border: 2px solid rgba(255, 215, 0, 0.35);
    border-radius: 18px;
    padding: 25px 18px;
    text-align: center;
}

.champion-logo {
    width: 160px;
    height: auto;
    margin: 0 auto 12px auto;
}
.bracket {
  max-width: 600px;
  margin: 0 auto;
  padding: 16px;
  box-sizing: border-box;
}

.final-and-champion {
  background: rgba(255, 215, 0, 0.12);
  border: 2px solid rgba(255, 215, 0, 0.35);
  border-radius: 16px;
  padding: 20px;
  margin-top: 20px;
}

.champion-box {
  text-align: center;
  margin-top: 25px;
}

.champion-box img {
  width: 150px;
  height: auto;
  margin-bottom: 10px;
}
#statistik,
#statistik .content-wrapper,
#statistik .tab-panel,
#statistik-container {
    max-width: 1200px;   /* samma som tabell & slutspel */
    width: 100%;
    margin: auto;
}

</style>
</head>

<body>
  <div id="sec-bg-layer">
    <div class="smoke-layer smoke-back"></div>
    <div class="smoke-layer"></div>
  </div>

  <div id="sec-page">
    <!-- HEADER -->
<a href="index.html" style="text-decoration:none; color:inherit;">
  <div class="sfc-header">
      <img class="sfc-logo" src="https://drive.google.com/thumbnail?id=1QybW_Uw8HO0OXo8vwQFD-zrrr-ifFrC9&sz=w1000" alt="SEC Logo">
      <div class="sfc-title">
        üèÜ Svenska eHockey <strong>Cupen</strong> 19.5 üèí
      </div>
      <div class="sfc-divider"></div>
  </div>
</a>


    <!-- NAVIGATION -->
    <nav class="cup-tabs">
      <button class="tab active" data-target="info">Info</button>
      <button class="tab" data-target="lag">Lag</button>
      <button class="tab" data-target="tabell">Tabell</button>
      <button class="tab" data-target="slutspel">Slutspel</button>
      <button class="tab" data-target="matcher">Matcher</button>
      <button class="tab" data-target="statistik">Statistik</button>
      <button class="tab" data-target="regler">Regler</button>
    </nav>





    
    <!-- INFO    FLIK 1 -->
    <div id="info" class="tab-panel active">
      <div class="info-card" style="padding:20px;">
        <h2>‚ÑπÔ∏è Om Svenska eHockey Cupen 19.5</h2>
        <p>
          <strong>Svenska eHockey Cupen 19.5 (SEC 19.5)</strong> var en f√∂rs√§songsturnering som spelades i oktober 2026 ‚Äì 
          en uppv√§rmning inf√∂r vinterns kommande eHockeyturneringar. Sex svenska lag gjorde upp i ett intensivt 
          gruppspel f√∂ljt av ett slutspel mellan de fyra fr√§msta lagen.
        </p>
        <p>
          Turneringen bj√∂d p√• underh√•llande matcher, tuff konkurrens och flera minnesv√§rda prestationer. 
          H√§r hittar du <strong>lag, tabeller, matcher, statistik och resultat</strong> ‚Äì allt samlat p√• ett st√§lle.
        </p>
      </div>
    </div>






    
<!-- üîπ LAG FLIK 2-->
<!-- ===================== -->
<!-- üèí LAG -->
<!-- ===================== -->
<div id="lag" class="tab-panel">
  <h2>üèí Deltagande lag</h2>
  <p>
    Klicka p√• ett lag f√∂r att se matcher och statistik i
    <strong>Svenska eHockey Cupen 19.5</strong>.
  </p>

  <div id="team-grid" class="team-grid">
    <p>Laddar lag‚Ä¶</p>
  </div>
</div>

<style>
/* =====================
   LAG ‚Äì GRID & KORT
   ===================== */
.team-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  margin-top: 28px;
}

.team-card {
  background: linear-gradient(180deg, #0f1220, #0a0d18);
  border: 1px solid rgba(255,215,0,0.25);
  border-radius: 18px;
  padding: 22px 18px;
  text-align: center;
  cursor: pointer;
  transition: all 0.25s ease;
}

.team-card:hover {
  transform: translateY(-4px);
  border-color: #ffd35c;
  box-shadow: 0 0 20px rgba(255,215,0,0.25);
}

.team-logo {
  width: 96px;
  height: 96px;
  margin: 0 auto 12px;
  border-radius: 50%;
  background: #0b0e1a;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid rgba(255,215,0,0.35);
}

.team-logo img {
  width: 80%;
  height: 80%;
  object-fit: contain;
}

.team-card h3 {
  margin: 6px 0 0;
  font-size: 1.05rem;
  font-weight: 600;
  color: #fff;
}
</style>

<script>
(function () {
  const grid = document.getElementById("team-grid");
  if (!grid) return;

  const CUP_NAME = "SEC 19.5";

  const API_BASE =
    "https://script.google.com/macros/s/AKfycbw-JnotgWHS9ftpM-1m_4dPg6IYJthH3KZ0acRzNB7u8vQmgsy0j82Xpgoxt3aBdpQ/exec";

  const MATCHER_API = API_BASE + "?sheet=matcherSEC";
  const LOGO_API    = API_BASE + "?sheet=lagloggor";

  Promise.all([
    fetch(MATCHER_API).then(r => r.json()),
    fetch(LOGO_API).then(r => r.json())
  ])
  .then(([matcher, logos]) => {

    /* =====================
       BYGG LOGO-MAP (NORMALISERAD)
       ===================== */
    const logoMap = {};

    logos.forEach(r => {
      const rawName =
        (r.laglogga || r.Laglogga || "").toString();
      const rawId =
        (r.driveid || r.DriveID || "").toString();

      const name = rawName.trim().toLowerCase();
      const id   = rawId.trim();

      if (!name || !id) return;

      logoMap[name] =
        `https://drive.google.com/thumbnail?id=${id}&sz=w300`;
    });

    console.log("LOGOMAP:", logoMap);

    /* =====================
       SAMLA LAG FR√ÖN MATCHER
       ===================== */
    const teams = new Set();

    matcher.forEach(r => {
      const cup = (r.cup || r.Cup || "").toString().trim();
      if (cup !== CUP_NAME) return;

      const home = (r.home_team || r["Home team"] || "").toString().trim();
      const away = (r.away_team || r["Away team"] || "").toString().trim();

      if (home) teams.add(home);
      if (away) teams.add(away);
    });

    if (teams.size === 0) {
      grid.innerHTML = "<p>Inga lag hittades f√∂r denna cup.</p>";
      return;
    }

    /* =====================
       RENDERA KORT
       ===================== */
    grid.innerHTML = "";

    [...teams].sort().forEach(team => {
      const key = team.trim().toLowerCase();

      const logo =
        logoMap[key] ||
        "https://dummyimage.com/200x200/0b0e1a/ffffff&text=SEC";

      const card = document.createElement("div");
      card.className = "team-card";
      card.innerHTML = `
        <div class="team-logo">
          <img src="${logo}" alt="${team}">
        </div>
        <h3>${team}</h3>
      `;

      card.onclick = () => {
        location.href =
          "lagkort.html?team=" +
          encodeURIComponent(team) +
          "&cup=19.5";
      };

      grid.appendChild(card);
    });
  })
  .catch(err => {
    console.error("Lag-flik fel:", err);
    grid.innerHTML = "<p>Fel vid laddning av lag.</p>";
  });
})();
</script>



    
<!-- üîπ TABELL  FLIK 3 -->
<div id="tabell" class="tab-panel">
  <h2>üìä Gruppspelstabell</h2>
  <p>Aktuell tabell f√∂r <strong>Svenska eHockey Cupen 19.5</strong> ‚Äì topp fyra lag g√•r till slutspel üèÜ</p>

  <div id="sec-standings" style="max-width:950px;margin:auto;"></div>

<script>
(function () {
  const host = document.getElementById("sec-standings");
  host.innerHTML = '<div style="padding:12px;color:#ccc;">Laddar tabell‚Ä¶</div>';

  const CUP_NAME = "SEC 19.5";

  // üîπ Godk√§nda v√§rden f√∂r gruppspel
  const GROUP_STAGES = ["grupp", "gruppspel", "group", "group stage"];

  const API_BASE =
    "https://script.google.com/macros/s/AKfycbw-JnotgWHS9ftpM-1m_4dPg6IYJthH3KZ0acRzNB7u8vQmgsy0j82Xpgoxt3aBdpQ/exec";

  const MATCHER_API = API_BASE + "?sheet=matcherSEC";
  const LOGO_API    = API_BASE + "?sheet=lagloggor";

  Promise.all([
    fetch(MATCHER_API).then(r => r.json()),
    fetch(LOGO_API).then(r => r.json())
  ])
  .then(([matches, logos]) => {

    /* =====================
       LOGO MAP
       ===================== */
    const logoMap = {};
    logos.forEach(r => {
      const name = (r.laglogga || r.Laglogga || "")
        .toString().trim().toLowerCase();
      const id = (r.driveid || r.DriveID || "").toString().trim();
      if (name && id) {
        logoMap[name] =
          `https://drive.google.com/thumbnail?id=${id}&sz=w200`;
      }
    });

    /* =====================
       TABELL + H2H STRUKTUR
       ===================== */
    const table = {};
    const h2h = {}; // h2h[A][B] = po√§ng A tog mot B

    function ensureTeam(name) {
      if (!table[name]) {
        table[name] = {
          team_name: name,
          gp: 0,
          w: 0,
          otw: 0,
          l: 0,
          otl: 0,
          gf: 0,
          ga: 0,
          gd: 0,
          p: 0,
          ppg: 0,
          wins: 0,
          logo_url: logoMap[name.toLowerCase()] || ""
        };
      }
      return table[name];
    }

    function addH2H(a, b, pa, pb) {
      if (!h2h[a]) h2h[a] = {};
      if (!h2h[b]) h2h[b] = {};
      h2h[a][b] = (h2h[a][b] || 0) + pa;
      h2h[b][a] = (h2h[b][a] || 0) + pb;
    }

    /* =====================
       PROCESSA MATCHER
       ===================== */
    matches.forEach(m => {
      const cup = (m.cup || m.Cup || "").toString().trim();
      if (cup !== CUP_NAME) return;

      // üîπ FILTRERA BORT SLUTSPEL
      const stage = (m.stage || m.Stage || "").toString().trim().toLowerCase();
      if (!GROUP_STAGES.includes(stage)) return;

      const home = (m.home_team || m["Home team"] || "").toString().trim();
      const away = (m.away_team || m["Away team"] || "").toString().trim();
      if (!home || !away) return;

      const hs = Number(m.home_score ?? m["Home score"] ?? 0);
      const as = Number(m.away_score ?? m["Away score"] ?? 0);
      const isOT = String(m.ot || m.OT || "").toLowerCase() === "ot";

      const H = ensureTeam(home);
      const A = ensureTeam(away);

      H.gp++; A.gp++;
      H.gf += hs; H.ga += as;
      A.gf += as; A.ga += hs;

      if (hs > as) {
        if (isOT) {
          H.otw++; H.p += 2;
          A.otl++; A.p += 1;
          addH2H(home, away, 2, 1);
        } else {
          H.w++; H.p += 3;
          A.l++;
          addH2H(home, away, 3, 0);
        }
      } else {
        if (isOT) {
          A.otw++; A.p += 2;
          H.otl++; H.p += 1;
          addH2H(away, home, 2, 1);
        } else {
          A.w++; A.p += 3;
          H.l++;
          addH2H(away, home, 3, 0);
        }
      }
    });

    /* =====================
       SLUTBER√ÑKNING
       ===================== */
    const rows = Object.values(table).map(t => {
      t.gd = t.gf - t.ga;
      t.ppg = t.gp > 0 ? t.p / t.gp : 0;
      t.wins = t.w + t.otw;
      return t;
    });

    /* =====================
       SORTERING ‚Äì TIEBREAKERS
       ===================== */
    rows.sort((a, b) => {

      // 1Ô∏è‚É£ PPG
      if (b.ppg !== a.ppg) return b.ppg - a.ppg;

      // 2Ô∏è‚É£ Segrar
      if (b.wins !== a.wins) return b.wins - a.wins;

      // 3Ô∏è‚É£ Inb√∂rdes m√∂ten
      const h2hAB = h2h[a.team_name]?.[b.team_name] || 0;
      const h2hBA = h2h[b.team_name]?.[a.team_name] || 0;
      if (h2hAB !== h2hBA) return h2hBA - h2hAB;

      // 4Ô∏è‚É£ M√•lskillnad
      if (b.gd !== a.gd) return b.gd - a.gd;

      // 5Ô∏è‚É£ Gjorda m√•l
      if (b.gf !== a.gf) return b.gf - a.gf;

      return a.team_name.localeCompare(b.team_name);
    });

    /* =====================
       RENDER TABELL
       ===================== */
    const tableEl = document.createElement("table");
    tableEl.className = "sec-table";

    tableEl.innerHTML = `
      <thead>
        <tr>
          <th>#</th>
          <th>Lag</th>
          <th>GP</th>
          <th>W</th>
          <th>OTW</th>
          <th>L</th>
          <th>OTL</th>
          <th>GD</th>
          <th>P</th>
        </tr>
      </thead>
      <tbody>
        ${rows.map((r,i)=>`
          <tr class="${i < 4 ? "top4" : ""}">
            <td>${i+1}</td>
            <td>
              <a href="lagkort.html?team=${encodeURIComponent(r.team_name)}&cup=19.5"
                 style="color:inherit;text-decoration:none;">
                <div class="team-cell">
                  <img src="${r.logo_url}" alt="${r.team_name}">
                  <span>${r.team_name}</span>
                </div>
              </a>
            </td>
            <td>${r.gp}</td>
            <td>${r.w}</td>
            <td>${r.otw}</td>
            <td>${r.l}</td>
            <td>${r.otl}</td>
            <td>${r.gd}</td>
            <td>${r.p}</td>
          </tr>
        `).join("")}
      </tbody>
    `;

    host.innerHTML = "";
    const wrap = document.createElement("div");
    wrap.className = "table-wrapper";
    wrap.appendChild(tableEl);
    host.appendChild(wrap);

  })
  .catch(err => {
    console.error("Tabellfel:", err);
    host.innerHTML =
      '<div style="color:#f66;padding:12px;">Kunde inte bygga tabellen.</div>';
  });
})();
</script>



</div>

<style>
/* === TABELLSTIL (SEC 19.5 Dark Edition) === */
.table-wrapper {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: 14px;
}

/* --- Scroll design --- */
.table-wrapper table {
  min-width: 650px; /* g√∂r att den scrollar snyggt p√• mobil */
  width: 100%;
}
.table-wrapper::-webkit-scrollbar {
  height: 8px;
}
.table-wrapper::-webkit-scrollbar-thumb {
  background: rgba(255, 215, 0, 0.35);
  border-radius: 4px;
}
.table-wrapper::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

/* --- Sj√§lva tabellen --- */
.sec-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 24px;
  font-family: 'Inter', Arial, sans-serif;
  font-size: 15px;
  background: linear-gradient(180deg, rgba(12,18,34,0.98), rgba(18,22,45,0.98));
  color: #ddd;
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 0 22px rgba(255,215,0,0.05);
  animation: fadeIn 0.5s ease;
}

/* --- Rubriker --- */
.sec-table thead th {
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: linear-gradient(90deg, rgba(30,30,45,1), rgba(45,38,18,0.7));
  color: #e5c56a;
  font-weight: 600;
  padding: 12px 10px;
  border-bottom: 1px solid rgba(255,215,0,0.1);
  cursor: default;
  text-align: right;
  user-select: none;
}
.sec-table thead th:first-child,
.sec-table thead th:nth-child(2) { text-align: left; }

.sec-table thead th.sortable-header:hover {
  background: rgba(255,215,0,0.12);
  cursor: pointer;
}

/* --- Celler --- */
.sec-table td {
  padding: 10px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  text-align: right;
}
.sec-table td:first-child,
.sec-table td:nth-child(2) { text-align: left; }

/* --- Top 4 Highlight --- */
.sec-table tr.top4 {
  background: rgba(214,177,95,0.1);
  font-weight: 600;
}
.sec-table tr.top4 td {
  color: #ffdb7a;
}

/* --- Hover --- */
.sec-table tbody tr:hover {
  background: rgba(255,215,0,0.08);
  transition: background 0.2s ease;
}

/* --- Lagkolumn med logga --- */
.team-cell {
  display: flex;
  align-items: center;
  gap: 8px;
}
.team-cell img {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  object-fit: contain;
  border: 1px solid rgba(255,215,0,0.15);
}

/* --- Fade Animation --- */
@keyframes fadeIn {
  from {opacity: 0; transform: translateY(10px);}
  to {opacity: 1; transform: translateY(0);}
}
  /* üì± G√∂r gruppspelstabellen fullbredd p√• mobil */
@media (max-width: 768px) {

  /* Sj√§lva kortet runt tabellen */
  .table-card, 
  .group-table-container, 
  #group-table, 
  .tabell-container {
    max-width: 100% !important;
    width: 100% !important;
    margin: 0 !important;
    border-radius: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Tabellen i sig */
  .group-table, 
  .table-wrap, 
  table {
    width: 100% !important;
    min-width: 0 !important;
  }

  /* Cellerna f√•r lite mer spacing */
  table th, table td {
    padding-left: 14px !important;
    padding-right: 14px !important;
  }
}

</style>



<!-- üîπ SLUTSPEL FLIK 4 -->
<div id="slutspel" class="tab-panel">
  <h2>üèÜ Slutspel</h2>
  <p>H√§r hittar du resultat fr√•n semifinaler och final i Svenska eHockey Cupen 19.5.</p>

  <div id="playoff-container" style="max-width:1100px;margin:auto;display:grid;gap:24px;"></div>



<script>
(function () {
  const container = document.getElementById("playoff-container");
  container.innerHTML =
    "<div style='color:#ccc;padding:12px;'>Laddar slutspel‚Ä¶</div>";

  const CUP_NAME = "SEC 19.5";

  /* =====================
     SLUTSPELS-KONFIG
     ===================== */
  const PLAYOFF_CONFIG = {
    "√ÖTTONDELSFINAL": { bestOf: 3, title: "√Öttondelsfinaler" },
    "KVARTSFINAL":   { bestOf: 5, title: "Kvartsfinaler" },
    "SEMIFINAL":     { bestOf: 5, title: "Semifinaler" },
    "FINAL":         { bestOf: 5, title: "Final" }
  };

  const API_BASE =
    "https://script.google.com/macros/s/AKfycbw-JnotgWHS9ftpM-1m_4dPg6IYJthH3KZ0acRzNB7u8vQmgsy0j82Xpgoxt3aBdpQ/exec";

  const MATCHER_API = API_BASE + "?sheet=matcherSEC";
  const LOGO_API    = API_BASE + "?sheet=lagloggor";

  Promise.all([
    fetch(MATCHER_API).then(r => r.json()),
    fetch(LOGO_API).then(r => r.json())
  ])
  .then(([matches, logos]) => {

    /* =====================
       LOGOMAP
       ===================== */
    const logoMap = {};
    logos.forEach(r => {
      const name = (r.laglogga || r.Laglogga || "")
        .toString().trim().toLowerCase();
      const id = (r.driveid || r.DriveID || "").toString().trim();
      if (name && id) {
        logoMap[name] =
          `https://drive.google.com/thumbnail?id=${id}&sz=w200`;
      }
    });

    const logo = team => logoMap[team.toLowerCase()] || "";

    const norm = v => (v || "").toString().trim();

    /* =====================
       FILTRERA SLUTSPEL
       ===================== */
    const playoffMatches = matches
      .filter(m =>
        norm(m.cup || m.Cup) === CUP_NAME &&
        PLAYOFF_CONFIG[norm(m.stage || m.Stage)]
      )
      .map(m => ({
        stage: norm(m.stage || m.Stage),
        date: norm(m.date || m.Date),
        time: norm(m.time || m.Time),
        home: norm(m.home_team || m["Home team"]),
        away: norm(m.away_team || m["Away team"]),
        hs: Number(m.home_score ?? m["Home score"] ?? 0),
        as: Number(m.away_score ?? m["Away score"] ?? 0),
        ot: String(m.ot || m.OT || "").toLowerCase() === "ot"
      }));

    if (!playoffMatches.length) {
      container.innerHTML =
        "<div style='color:#ccc;padding:12px;'>Ingen slutspelsdata hittades.</div>";
      return;
    }

    /* =====================
       GRUPPERA PER RONDER
       ===================== */
    const rounds = {};
    playoffMatches.forEach(m => {
      (rounds[m.stage] = rounds[m.stage] || []).push(m);
    });

    /* =====================
       RENDER ALLA RONDER
       ===================== */
    let html = `<div class="slutspel-wrapper">`;
    let champion = "";

    Object.keys(PLAYOFF_CONFIG).forEach(stage => {
      if (!rounds[stage]) return;

      const seriesGroups = {};
      rounds[stage].forEach(m => {
        const key = [m.home, m.away].sort().join("|");
        (seriesGroups[key] = seriesGroups[key] || []).push(m);
      });

      html += `
        <h3 class="section-title">üèí ${PLAYOFF_CONFIG[stage].title}</h3>
        <div class="${stage.toLowerCase()}-grid">
          ${Object.values(seriesGroups)
            .map(series => renderSeries(series, stage))
            .join("")}
        </div>
        <div class="gold-divider"></div>
      `;

      // m√§stare fr√•n sista rundan
      if (stage === "FINAL") {
        const finalSeries = Object.values(seriesGroups)[0];
        champion = getSeriesWinner(finalSeries);
      }
    });

    html += `
      ${champion ? `
      <div class="champion-clean">
        <img src="${logo(champion)}" alt="${champion}">
        üèÜ <strong>${champion}</strong>
      </div>` : ""}
      </div>
    `;

    container.innerHTML = html;
  })
  .catch(err => {
    console.error("Slutspel fel:", err);
    container.innerHTML =
      "<div style='color:#f66;padding:12px;'>Fel vid laddning av slutspel.</div>";
  });

  /* =====================
     SERIEKORT
     ===================== */
  function renderSeries(matches, stage) {
    const cup = "19.5";
    const bestOf = PLAYOFF_CONFIG[stage].bestOf;

    matches.sort((a,b)=>
      new Date(a.date+" "+a.time) - new Date(b.date+" "+b.time)
    );

    const wins = {};
    matches.forEach(m => {
      wins[m.home] = wins[m.home] || 0;
      wins[m.away] = wins[m.away] || 0;
      if (m.hs > m.as) wins[m.home]++;
      else wins[m.away]++;
    });

    const teams = Object.keys(wins);
    const a = teams[0];
    const b = teams[1];
    const wa = wins[a];
    const wb = wins[b];
    const leader =
      wa > wb ? a :
      wb > wa ? b : "";

    const maxWins = Math.ceil(bestOf / 2);
    const decided = wa === maxWins || wb === maxWins;

    const status = leader
      ? decided
        ? `${leader} vann ${Math.max(wa,wb)}‚Äì${Math.min(wa,wb)}`
        : `${leader} leder ${Math.max(wa,wb)}‚Äì${Math.min(wa,wb)}`
      : "";

    return `
      <div class="series-card">
        ${matches.map(m => `
          <div class="team-line">
            <a href="lagkort.html?team=${encodeURIComponent(m.home)}&cup=${cup}">
              ${m.home}
            </a>
            <span>${m.hs} ‚Äì ${m.as}${m.ot ? " (OT)" : ""}</span>
            <a href="lagkort.html?team=${encodeURIComponent(m.away)}&cup=${cup}">
              ${m.away}
            </a>
          </div>
        `).join("")}
        <div class="best-of">
          B√§st av ${bestOf}${status ? ` ‚Äì ${status}` : ""}
        </div>
      </div>
    `;
  }

  function getSeriesWinner(matches) {
    const wins = {};
    matches.forEach(m => {
      wins[m.home] = wins[m.home] || 0;
      wins[m.away] = wins[m.away] || 0;
      if (m.hs > m.as) wins[m.home]++;
      else wins[m.away]++;
    });
    return Object.keys(wins).sort((a,b)=>wins[b]-wins[a])[0];
  }
})();
</script>




<style>
.slutspel-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 36px;
  width: 100%;
  max-width: 850px;
  margin: auto;
}

.section-title {
  font-size: 1.7rem;
  text-align: center;
  color: #f6d776;
  font-weight: 600;
}

.semi-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  width: 100%;
}

.final-box {
  display: flex;
  justify-content: center;
  width: 100%;
}

.series-card {
  background: rgba(255,215,0,0.06);
  border: 1px solid rgba(255,215,0,0.25);
  border-radius: 14px;
  padding: 18px 22px;
  min-width: 240px;
  text-align: center;
  color: white;
}

.champion-clean {
  background: rgba(20,20,40,0.9);
  border: 1px solid rgba(255,215,0,0.3);
  border-radius: 14px;
  padding: 22px 25px;
  text-align: center;
  color: #f6d776;
  font-size: 1.4rem;
  font-weight: 700;
}

.champion-clean img {
  width: 70px;
  height: 70px;
  object-fit: contain;
  filter: drop-shadow(0 0 6px rgba(255,215,0,0.4));
}

.gold-divider {
  height: 2px;
  background: linear-gradient(to right, transparent, rgba(255,215,0,0.4), transparent);
  width: 60%;
  margin: 0 auto;
}

@media(max-width: 700px) {
  .semi-grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  .champion-clean {
    width: 90%;
  }
}
</style>
</div> <!-- üëà St√§nger bara slutspelssektionen h√§r -->

<!-- ========================= -->
<!-- MATCHER ‚Äì FLIK 5 -->
<!-- ========================= -->
<!-- ========================= -->
<!-- MATCHER ‚Äì FLIK 5 -->
<!-- ========================= -->
<div id="matcher" class="tab-panel">
  <h2>üìÖ Matcher</h2>
  <p>Alla matcher i Svenska eHockey Cupen 19.5 ‚Äì gruppspel och slutspel</p>

  <!-- Filter -->
  <div class="match-filter">
    <select id="team-filter">
      <option value="">Alla lag</option>
    </select>
  </div>

  <!-- Gruppspel -->
  <div id="matches-group"></div>

  <!-- Slutspel -->
  <div class="playoff-section" id="matches-playoff-wrap" style="display:none;">
    <h2>üèÜ Slutspel</h2>
    <p>Semifinaler och final i Svenska eHockey Cupen 19.5</p>
    <div id="matches-playoff"></div>
  </div>
</div>

<!-- ========================= -->
<!-- STYLE ‚Äì MATCHER -->
<!-- ========================= -->
<style>
#matcher {
  background: linear-gradient(180deg, #0b0f1f, #070a14);
  color: #e8e8e8;
  padding: 28px 24px;
  border-radius: 22px;
  border: 1px solid rgba(214,177,95,0.25);
  box-shadow: 0 18px 50px rgba(0,0,0,0.85);
}

#matcher h2 {
  color: #f6d66b;
  font-weight: 800;
  font-size: 26px;
  text-align: center;
  margin-bottom: 6px;
  text-shadow: 0 0 14px rgba(214,177,95,0.45);
}

#matcher p {
  color: #b9bdd6;
  text-align: center;
  margin-bottom: 18px;
  font-size: 15px;
}

/* Filter */
.match-filter{
  display:flex;
  justify-content:center;
  margin: 6px 0 18px;
}
.match-filter select{
  background: rgba(12,18,40,0.9);
  color: #f6d66b;
  border: 1px solid rgba(214,177,95,0.25);
  border-radius: 12px;
  padding: 10px 14px;
  font-weight: 700;
  outline: none;
  box-shadow: 0 0 14px rgba(214,177,95,0.12);
}
.match-filter select:focus{
  border-color: rgba(214,177,95,0.55);
}

/* Matchdag */
.matchday {
  margin-top: 24px;
}

.matchday h3 {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(12,18,40,0.95);
  color: #f6d66b;
  padding: 10px 16px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 800;
  border: 1px solid rgba(214,177,95,0.2);
  box-shadow: 0 0 18px rgba(214,177,95,0.18);
  cursor: pointer;
  user-select: none;
}

.matchday h3 .chev{
  margin-left: 6px;
  opacity: 0.8;
  font-weight: 900;
}

/* Collapse */
.matchday.collapsed .match-card { display:none; }

/* Matchkort */
.match-card {
  margin-top: 12px;
  padding: 14px 18px;
  border-radius: 14px;
  background: radial-gradient(circle at top, #0e1326 0%, #070a14 100%);
  border: 1px solid rgba(255,215,0,0.12);
  box-shadow: 0 0 10px rgba(0,0,0,0.6);
  transition: all 0.25s ease;

  display: grid;
  grid-template-columns: 70px 1fr auto 1fr;
  align-items: center;
  gap: 12px;
}

.match-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 22px rgba(214,177,95,0.18);
  border-color: rgba(214,177,95,0.35);
}

.match-card .time {
  color: #f6d66b;
  font-weight: 800;
  font-size: 14px;
  white-space: nowrap;
}

/* Lag */
.team {
  font-weight: 650;
  color: #eaeaf0;
  display:flex;
  align-items:center;
  gap: 10px;
  min-width: 0;
}
.team.right { justify-content: flex-start; }
.team.left  { justify-content: flex-end; }

.team .name{
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.team a { color: inherit; text-decoration:none; }
.team a:hover { text-decoration: underline; }

.team .logo{
  width: 24px;
  height: 24px;
  border-radius: 6px;
  object-fit: contain;
  border: 1px solid rgba(214,177,95,0.18);
  background: rgba(0,0,0,0.25);
  padding: 2px;
}

/* Vinnare */
.team.winner{
  color: #f6d66b;
  font-weight: 900;
}

/* Score */
.match-card .score {
  min-width: 92px;
  text-align: center;
  font-weight: 900;
  font-size: 18px;
  color: #ffffff;
  letter-spacing: 0.5px;
}

.ot {
  margin-left: 4px;
  font-size: 12px;
  font-weight: 900;
  color: #d6b15f;
}

/* Slutspel */
.playoff-section {
  margin-top: 50px;
  padding-top: 24px;
  border-top: 2px solid rgba(214,177,95,0.3);
}

.match-card.playoff {
  background: linear-gradient(180deg, #121735, #090d1b);
  border-left: 4px solid #f6d66b;
}

/* Mobil */
@media (max-width: 700px) {
  #matcher { padding: 22px 14px; }
  .match-card {
    grid-template-columns: 1fr;
    text-align: center;
    gap: 8px;
  }
  .team.left, .team.right { justify-content:center; }
  .match-card .score { font-size: 16px; }
}
</style>

<!-- ========================= -->
<!-- SCRIPT ‚Äì MATCHER -->
<!-- (lagloggor i matchkort, markera vinnare, filtrera per lag, collapse per datum) -->
<!-- ========================= -->
<script>
(function () {
  const CUP_NAME = "SEC 19.5";
  const API_BASE =
    "https://script.google.com/macros/s/AKfycbw-JnotgWHS9ftpM-1m_4dPg6IYJthH3KZ0acRzNB7u8vQmgsy0j82Xpgoxt3aBdpQ/exec";

  const MATCHER_API = API_BASE + "?sheet=matcherSEC";
  const LOGO_API    = API_BASE + "?sheet=lagloggor";

  const groupHost   = document.getElementById("matches-group");
  const playoffWrap = document.getElementById("matches-playoff-wrap");
  const playoffHost = document.getElementById("matches-playoff");
  const filterSel   = document.getElementById("team-filter");

  if (!groupHost || !playoffWrap || !playoffHost || !filterSel) return;

  groupHost.innerHTML = "<div style='color:#ccc;padding:12px;text-align:center;'>Laddar matcher‚Ä¶</div>";

  const norm  = v => (v ?? "").toString().trim();
  const lower = v => norm(v).toLowerCase();

  function getField(row, keys) {
    for (const k of keys) {
      if (row && row[k] !== undefined && row[k] !== null && String(row[k]).trim() !== "") return row[k];
    }
    return "";
  }

  function parseScore(v) {
    const n = Number(String(v ?? "").replace(/[^\d-]/g, ""));
    return Number.isFinite(n) ? n : 0;
  }

  function stageBucket(stageRaw) {
    const s = lower(stageRaw);
    if (!s) return "GRUPPSPEL";           // defaulta till gruppspel om tomt
    if (s.includes("grupp")) return "GRUPPSPEL";
    return "PLAYOFF";
  }

  function escapeHtml(str) {
    return String(str ?? "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  function teamLink(name) {
    const t = norm(name);
    const url = `lagkort.html?team=${encodeURIComponent(t)}&cup=19.5`;
    return `<a href="${url}"><span class="name">${escapeHtml(t)}</span></a>`;
  }

  function logoUrl(team, logoMap) {
    const t = norm(team);
    return logoMap[t] || "";
  }

  // Renderar en match (med logga + vinnare)
  function matchCardHTML(m, isPlayoff, logoMap) {
    const isDraw = (m.as === m.hs);
    const awayWin = !isDraw && m.as > m.hs;
    const homeWin = !isDraw && m.hs > m.as;

    const ot = m.ot ? ` <span class="ot">OT</span>` : "";
    const cls = "match-card" + (isPlayoff ? " playoff" : "");

    const awayLogo = logoUrl(m.away, logoMap);
    const homeLogo = logoUrl(m.home, logoMap);

    return `
      <div class="${cls}">
        <div class="time">${escapeHtml(m.time)}</div>

        <div class="team left ${awayWin ? "winner" : ""}">
          ${awayLogo ? `<img class="logo" src="${awayLogo}" alt="${escapeHtml(m.away)}">` : ""}
          ${teamLink(m.away)}
        </div>

        <div class="score">${m.as} ‚Äì ${m.hs}${ot}</div>

        <div class="team right ${homeWin ? "winner" : ""}">
          ${homeLogo ? `<img class="logo" src="${homeLogo}" alt="${escapeHtml(m.home)}">` : ""}
          ${teamLink(m.home)}
        </div>
      </div>
    `;
  }

  function renderBlock(host, groupedByDate, isPlayoff, logoMap) {
    const dates = Object.keys(groupedByDate);
    if (!dates.length) {
      host.innerHTML = "<div style='color:#ccc;padding:12px;text-align:center;'>Inga matcher hittades.</div>";
      return;
    }

    // sortera datum (f√∂rs√∂k parse, annars text)
    dates.sort((a,b)=>{
      const ta = Date.parse(a), tb = Date.parse(b);
      if (Number.isFinite(ta) && Number.isFinite(tb)) return ta - tb;
      return a.localeCompare(b);
    });

    host.innerHTML = dates.map(date => {
      const matches = groupedByDate[date];

      // sortera tider om m√∂jligt
      matches.sort((x,y)=>{
        const tx = norm(x.time), ty = norm(y.time);
        const px = Date.parse("1970-01-01 " + tx);
        const py = Date.parse("1970-01-01 " + ty);
        if (Number.isFinite(px) && Number.isFinite(py)) return px - py;
        return tx.localeCompare(ty);
      });

      const cards = matches.map(m => matchCardHTML(m, isPlayoff, logoMap)).join("");

      return `
        <div class="matchday" data-date="${escapeHtml(date)}">
          <h3>üìÖ ${escapeHtml(date)} <span class="chev">‚ñæ</span></h3>
          ${cards}
        </div>
      `;
    }).join("");

    // Collapse per datum
    host.querySelectorAll(".matchday > h3").forEach(h3 => {
      h3.addEventListener("click", () => {
        const day = h3.parentElement;
        day.classList.toggle("collapsed");
        const chev = h3.querySelector(".chev");
        if (chev) chev.textContent = day.classList.contains("collapsed") ? "‚ñ∏" : "‚ñæ";
      });
    });
  }

  Promise.all([
    fetch(MATCHER_API + (MATCHER_API.includes("?") ? "&" : "?") + "_t=" + Date.now()).then(r => r.json()),
    fetch(LOGO_API    + (LOGO_API.includes("?") ? "&" : "?") + "_t=" + Date.now()).then(r => r.json())
  ])
  .then(([rows, logos]) => {
    // Bygg logoMap robust (st√∂d f√∂r olika kolumnnamn)
    const logoMap = {};
    (logos || []).forEach(r => {
      const team = norm(getField(r, ["laglogga","Laglogga","team","Team","team_name","Team name"]));
      const id   = norm(getField(r, ["driveid","DriveID","driveId","id","ID"]));
      const url  = norm(getField(r, ["url","URL","logo_url","LogoURL"]));

      if (team) {
        if (url) logoMap[team] = url;
        else if (id) logoMap[team] = `https://drive.google.com/thumbnail?id=${id}&sz=w100`;
      }
    });

    // Normalisera matchrader (st√∂d f√∂r flera m√∂jliga headers)
    const all = (rows || []).map(r => {
      const cup   = norm(getField(r, ["cup","Cup"]));
      const stage = norm(getField(r, ["stage","Stage","round","Round"]));
      const date  = norm(getField(r, ["date","Date"]));
      const time  = norm(getField(r, ["time","Time"]));

      const away  = norm(getField(r, ["away_team","Away team","Away Team","away"]));
      const home  = norm(getField(r, ["home_team","Home team","Home Team","home"]));

      const as    = parseScore(getField(r, ["away_score","Away score","Away Score","as"]));
      const hs    = parseScore(getField(r, ["home_score","Home score","Home Score","hs"]));

      const otRaw = lower(getField(r, ["ot","OT","overtime","Overtime"]));
      const ot    = otRaw === "ot" || otRaw === "yes" || otRaw === "true" || otRaw === "1";

      return { cup, stage, date, time, away, home, as, hs, ot };
    })
    .filter(m => m.cup === CUP_NAME && m.date && m.time && m.away && m.home);

    if (!all.length) {
      groupHost.innerHTML = "<div style='color:#ccc;padding:12px;text-align:center;'>Inga matcher hittades f√∂r denna cup.</div>";
      playoffWrap.style.display = "none";
      return;
    }

    // Bygg filter-lista
    const teamSet = new Set();
    all.forEach(m => { teamSet.add(m.away); teamSet.add(m.home); });
    const teams = [...teamSet].sort((a,b)=>a.localeCompare(b));

    // (√Öter)fyll dropdown utan att dubbla
    filterSel.innerHTML = `<option value="">Alla lag</option>` + teams.map(t => `<option value="${escapeHtml(t)}">${escapeHtml(t)}</option>`).join("");

    function applyFilter(list) {
      const selected = norm(filterSel.value);
      if (!selected) return list;
      return list.filter(m => m.away === selected || m.home === selected);
    }

    function buildGroups(list) {
      const group = {};
      const playoff = {};
      list.forEach(m => {
        const bucket = stageBucket(m.stage);
        const target = (bucket === "GRUPPSPEL") ? group : playoff;
        (target[m.date] ||= []).push(m);
      });
      return { group, playoff };
    }

    function renderAll() {
      const filtered = applyFilter(all);
      const { group, playoff } = buildGroups(filtered);

      // Gruppspel
      groupHost.innerHTML = "";
      renderBlock(groupHost, group, false, logoMap);

      // Slutspel
      if (Object.keys(playoff).length) {
        playoffWrap.style.display = "";
        playoffHost.innerHTML = "";
        renderBlock(playoffHost, playoff, true, logoMap);
      } else {
        playoffWrap.style.display = "none";
      }
    }

    filterSel.addEventListener("change", renderAll);
    renderAll();
  })
  .catch(err => {
    console.error("Matcher-flik fel:", err);
    groupHost.innerHTML = "<div style='color:#f66;padding:12px;text-align:center;'>Fel vid laddning av matcher.</div>";
    playoffWrap.style.display = "none";
  });
})();
</script>



<!-- STATISTIK FLIK 6 -->
<div id="statistik" class="tab-panel">
  <h2>üìà Statistik</h2>
  <p>Individuell statistik f√∂r utespelare och m√•lvakter i turneringen.</p>
  <!-- üîπ NIV√Ö 1 ‚Äì DROPDOWN F√ñR KATEGORI -->
  <div class="category-select">
    <label for="categoryDropdown">üéØ V√§lj fas:</label>
    <select id="categoryDropdown">
      <option value="group" selected>Gruppspel</option>
      <option value="playoff">Slutspel</option>
    </select>
  </div>

  <!-- üîπ SEKTOR: GRUPPSPEL -->
  <div id="stat-group" class="stat-section active">
  
    <div class="sec-subnav level2">
      <nav class="tabs">
        <button class="tab stat-l2 is-active" data-target="group-skaters" type="button">UTESPELARE</button>
        <button class="tab stat-l2" data-target="group-goalies" type="button">M√ÖLVAKTER</button>
      </nav>
    </div>

    <div id="group-skaters" class="stat-subsection active">
      <div class="header-box">
        <h2>üèí Gruppspel ‚Äì Utespelarstatistik</h2>
        <input type="text" id="searchGroupSkaters" placeholder="üîç S√∂k spelare eller lag...">
      </div>
      <div id="group-player-stats"></div>
      <p id="updated-group-skaters" class="lastUpdated"></p>
    </div>

    <div id="group-goalies" class="stat-subsection">
      <div class="header-box">
        <h2>ü•Ö Gruppspel ‚Äì M√•lvaktsstatistik</h2>
        <input type="text" id="searchGroupGoalies" placeholder="üîç S√∂k m√•lvakt eller lag...">
      </div>
      <div id="group-goalie-stats"></div>
      <p id="updated-group-goalies" class="lastUpdated"></p>
    </div>
  </div>

  <!-- üîπ SEKTOR: SLUTSPEL -->
  <div id="stat-playoff" class="stat-section">
 
    <div class="sec-subnav level2">
      <nav class="tabs">
        <button class="tab stat-l2 is-active" data-target="playoff-skaters" type="button">UTESPELARE</button>
        <button class="tab stat-l2" data-target="playoff-goalies" type="button">M√ÖLVAKTER</button>
      </nav>
    </div>

    <div id="playoff-skaters" class="stat-subsection active">
      <div class="header-box">
        <h2>üèí Slutspel 19.5 ‚Äì Utespelarstatistik</h2>
        <input type="text" id="searchPlayoffSkaters" placeholder="üîç S√∂k spelare eller lag...">
      </div>
      <div id="playoff-player-stats"></div>
      <p id="updated-playoff-skaters" class="lastUpdated"></p>
    </div>

    <div id="playoff-goalies" class="stat-subsection">
      <div class="header-box">
        <h2>ü•Ö Slutspel 19.5 ‚Äì M√•lvaktsstatistik</h2>
        <input type="text" id="searchPlayoffGoalies" placeholder="üîç S√∂k m√•lvakt eller lag...">
      </div>
      <div id="playoff-goalie-stats"></div>
      <p id="updated-playoff-goalies" class="lastUpdated"></p>
    </div>
  </div>
</div>

<!-- üîπ STIL -->
<!-- ========================================================= -->
<!-- üíÖ DARK MODE DESIGN ‚Äì STATISTIK -->
<!-- ========================================================= -->
<style>
#statistik {
  max-width: 1200px;
  margin: 50px auto;
  background: #0a0d18;
  border-radius: 20px;
  padding: 36px 40px;
  box-shadow: inset 0 0 25px rgba(255, 215, 0, 0.05);
  border: 1px solid rgba(255, 215, 0, 0.05);
  color: #e4e4e4;
}
#statistik {
  padding: 40px 50px;
}

/* üèí Rubriker */
#statistik h2 {
  color: #f6d66b;
  font-size: 24px;
  font-weight: 800;
  margin: 0 0 10px;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.35);
}
#statistik p {
  color: #bbb;
  font-size: 15.5px;
  line-height: 1.7;
}

/* üéØ Dropdown ‚Äì v√§lj fas */
.category-select {
  margin: 14px 0 24px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.category-select label {
  font-weight: 600;
  color: #f6d66b;
  font-size: 15px;
}
#categoryDropdown {
  font-family: Inter, system-ui, Arial, sans-serif;
  font-size: 14.5px;
  font-weight: 600;
  padding: 8px 12px;
  border: 2px solid rgba(255, 215, 0, 0.25);
  border-radius: 8px;
  background: linear-gradient(180deg, #0f142b 0%, #090d1b 100%);
  color: #fff;
  cursor: pointer;
  transition: all .25s ease;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23f6d66b' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 12px;
  padding-right: 32px;
}
#categoryDropdown:hover {
  border-color: #f6d66b;
  box-shadow: 0 0 0 2px rgba(214, 177, 95, 0.25);
}
#categoryDropdown:focus {
  outline: none;
  border-color: #f6d66b;
  box-shadow: 0 0 0 3px rgba(214, 177, 95, 0.25);
}

/* üß≠ Flikar (UTESPELARE / M√ÖLVAKTER) */
#statistik .tabs {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 20px;
}
#statistik .tab {
  border: 1.5px solid rgba(255, 215, 0, 0.25);
  color: #f6d66b;
  background: linear-gradient(180deg, #0f142b 0%, #090d1b 100%);
  border-radius: 10px;
  padding: 10px 22px;
  font: 600 14px/1 Inter, system-ui, Arial, sans-serif;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.25s ease;
}
#statistik .tab:hover {
  background: #111a38;
  transform: translateY(-1px);
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.15);
}
#statistik .tab.is-active {
  background: linear-gradient(180deg, #f6d66b 0%, #e0c160 100%);
  color: #0a0d18;
  border-color: #f6d66b;
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.25);
}

/* üéØ Rubrik + s√∂kf√§lt */
.header-box {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;
  margin: 10px 0 20px;
}
.header-box h2 {
  font-size: 20px;
  font-weight: 700;
  color: #f6d66b;
  text-shadow: 0 0 6px rgba(255, 215, 0, 0.3);
}
.header-box input {
  padding: 8px 12px;
  font-size: 14px;
  border: 1px solid rgba(255, 215, 0, 0.2);
  border-radius: 8px;
  min-width: 240px;
  background: #0b0e1a;
  color: #fff;
  outline: none;
  transition: border-color .2s;
}
.header-box input:focus {
  border-color: #f6d66b;
}
@media (max-width: 700px) {
  .header-box {
    flex-direction: column;
    align-items: flex-start;
  }
  .header-box input {
    width: 100%;
  }
}

/* üìä Tabellen */
#statistik .wrap {
  background: #0b0e1a;
  border-radius: 12px;
  overflow-x: auto;
  box-shadow: 0 0 18px rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(255, 215, 0, 0.1);
}
#statistik table {
  width: 100%;
  min-width: 600px;
  border-collapse: separate;
  border-spacing: 0;
  font: 14px/1.4 Inter, system-ui, Arial, sans-serif;
}
#statistik thead th {
  position: sticky;
  top: 0;
  background: #101b40;
  color: #f6d66b;
  padding: 10px 8px;
  border-bottom: 1px solid rgba(255, 215, 0, 0.2);
  text-align: center;
  cursor: pointer;
  font-weight: 700;
  text-transform: uppercase;
}
#statistik tbody td {
  padding: 10px 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  text-align: center;
  color: #e4e4e4;
  white-space: nowrap;
}
#statistik tbody tr:hover {
  background: rgba(255, 215, 0, 0.06);
  transition: background 0.2s;
}

/* Spelarnamn & lag v√§nsterjusterade */
#statistik tbody td[data-label="PLAYERS"],
#statistik tbody td[data-label="GOALIES"],
#statistik tbody td[data-label="TEAM"] {
  text-align: left !important;
  padding-left: 14px;
}

/* ‚è≥ Loader */
.loader {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 0;
  color: #f6d66b;
}
.loader .puck {
  font-size: 40px;
  animation: spin 1s linear infinite;
  margin-bottom: 8px;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Sektioner synlighet */
.stat-section { display: none; }
.stat-section.active { display: block; }
.stat-subsection { display: none; }
.stat-subsection.active { display: block; }
  @media (max-width: 768px) {
  #statistik {
    max-width: 100% !important;
    padding: 20px 0px; /* mindre marginaler */
  }
}
@media (max-width: 768px) {
  #statistik .wrap {
    width: 100%;
    border-radius: 0; /* tar bort rundade h√∂rn f√∂r full-width-look */
    border-left: none;
    border-right: none;
  }

  #statistik table {
    width: 100%;
    min-width: 0 !important; /* l√•ter den skalas ned helt */
  }

  #statistik thead th,
  #statistik tbody td {
    padding-left: 12px;
    padding-right: 12px;
  }
}

</style>

<script>
/* ============================
   STATISTIK ‚Äì DATA & LOGIK
   ============================ */

const API_BASE =
  "https://script.google.com/macros/s/AKfycbw-JnotgWHS9ftpM-1m_4dPg6IYJthH3KZ0acRzNB7u8vQmgsy0j82Xpgoxt3aBdpQ/exec";

const CUP_NAME = "SEC 19.5";

/* ============================
   FASV√ÑXEL (GRUPP / SLUTSPEL)
   ============================ */
const dropdown = document.getElementById("categoryDropdown");
const sections = {
  group: document.getElementById("stat-group"),
  playoff: document.getElementById("stat-playoff")
};

const saved = localStorage.getItem("sec-last-category") || "group";
dropdown.value = saved;
toggleCategory(saved);

dropdown.addEventListener("change", e => {
  const val = e.target.value;
  localStorage.setItem("sec-last-category", val);
  toggleCategory(val);
});

function toggleCategory(key) {
  Object.keys(sections).forEach(k =>
    sections[k].classList.toggle("active", k === key)
  );
}

/* ============================
   UNDERFLIKAR (UTES / M√ÖLV)
   ============================ */
document.querySelectorAll('#statistik .stat-section').forEach(section => {
  const tabs = section.querySelectorAll('.stat-l2');
  const subs = section.querySelectorAll('.stat-subsection');

  tabs.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = btn.dataset.target;
      tabs.forEach(t => t.classList.remove('is-active'));
      btn.classList.add('is-active');
      subs.forEach(s => s.classList.toggle('active', s.id === target));
    });
  });
});

/* ============================
   HJ√ÑLPFUNKTIONER
   ============================ */
const TEAM_MAP = {
  'vNV':'vNexs Vipers','VNV':'vNexs Vipers',
  'MOD':'Modo Hockey','SES':'Sunne IK Esport',
  'SA':'SSK Academy','SS':'Surte Sisu HC'
};

const FLAG = {
  SE:'üá∏üá™', FI:'üá´üáÆ', NO:'üá≥üá¥', DK:'üá©üá∞', IS:'üáÆüá∏',
  GB:'üá¨üáß', DE:'üá©üá™', US:'üá∫üá∏', CA:'üá®üá¶'
};

function norm(v){ return (v ?? "").toString().trim(); }

function mapTeam(v){
  const t = norm(v);
  return TEAM_MAP[t] || t;
}

function flagify(name){
  let txt = norm(name);
  const m = txt.match(/,\s*([A-Za-z]{2,3})$/);
  let code = m ? m[1].toUpperCase() : "";
  const MAP = {SWE:'SE',FIN:'FI',NOR:'NO',DNK:'DK',ISL:'IS',USA:'US',CAN:'CA'};
  if(MAP[code]) code = MAP[code];
  return {
    text: txt.replace(/,\s*[A-Za-z]{2,3}$/,''),
    flag: FLAG[code] || ""
  };
}

/* ============================
   GENERISK TABELLRENDER
   ============================ */
function renderTable({
  hostId,
  searchId,
  updatedId,
  sheet,
  sortFn
}) {
  const host = document.getElementById(hostId);
  const search = document.getElementById(searchId);
  const updated = document.getElementById(updatedId);

  if(!host) return;

  host.innerHTML = `
    <div class="loader">
      <div class="puck">üèí</div>
      <div>Laddar statistik‚Ä¶</div>
    </div>`;

  fetch(`${API_BASE}?sheet=${encodeURIComponent(sheet)}&_t=${Date.now()}`)
    .then(r => r.json())
    .then(rows => {

      if(!Array.isArray(rows) || !rows.length){
        host.textContent = "Ingen statistik hittades.";
        return;
      }

      /* üî• ENDA FILTRERINGEN */
      const data = rows.filter(r => norm(r.CUP) === CUP_NAME);

      if(!data.length){
        host.textContent = "Ingen statistik f√∂r denna cup.";
        return;
      }

      if(sortFn) data.sort(sortFn);

      const headers = Object.keys(data[0]);
      const table = document.createElement("table");

      /* HEADER */
      table.innerHTML = `
        <thead>
          <tr>
            <th>#</th>
            ${headers.map(h=>`<th>${h.toUpperCase()}</th>`).join("")}
          </tr>
        </thead>`;

      /* BODY */
      const tbody = document.createElement("tbody");

      data.forEach((row,i)=>{
        const tr = document.createElement("tr");

        tr.innerHTML =
          `<td>${i+1}</td>` +
          headers.map(k=>{
            let v = row[k] ?? "";

            if(/players|goalies/i.test(k)){
              const f = flagify(v);
              v = `${f.flag} <a href="players/?player=${encodeURIComponent(f.text)}"
                   style="color:#ffd35c;font-weight:600;text-decoration:none;">
                   ${f.text}</a>`;
            }

            if(k.toLowerCase()==="team"){
              const team = mapTeam(v);
              v = `<a href="lagkort.html?team=${encodeURIComponent(team)}&cup=19.5"
                   style="color:#ffd35c;font-weight:600;text-decoration:none;">
                   ${team}</a>`;
            }

            return `<td data-label="${k.toUpperCase()}">${v}</td>`;
          }).join("");

        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      host.innerHTML = "";
      const wrap = document.createElement("div");
      wrap.className = "wrap";
      wrap.appendChild(table);
      host.appendChild(wrap);

      if(updated){
        updated.textContent =
          "Senast uppdaterad: " + new Date().toLocaleString("sv-SE");
      }

      /* S√ñK */
      if(search){
        search.addEventListener("input",()=>{
          const q = search.value.toLowerCase();
          [...tbody.rows].forEach(r=>{
            r.style.display = [...r.cells]
              .some(c=>c.textContent.toLowerCase().includes(q))
              ? "" : "none";
          });
        });
      }
    })
    .catch(err=>{
      console.error(err);
      host.textContent="Fel vid laddning.";
    });
}

/* ============================
   GRUPPSPEL
   ============================ */
renderTable({
  hostId: "group-player-stats",
  searchId: "searchGroupSkaters",
  updatedId: "updated-group-skaters",
  sheet: "utestatsall",
  sortFn: (a,b)=>(+b.PTS||0)-(+a.PTS||0)||(+b.G||0)-(+a.G||0)
});

renderTable({
  hostId: "group-goalie-stats",
  searchId: "searchGroupGoalies",
  updatedId: "updated-group-goalies",
  sheet: "malvaktsstatsall",
  sortFn: (a,b)=>(parseFloat(b.SVP)||0)-(parseFloat(a.SVP)||0)
});

/* ============================
   SLUTSPEL
   ============================ */
renderTable({
  hostId: "playoff-player-stats",
  searchId: "searchPlayoffSkaters",
  updatedId: "updated-playoff-skaters",
  sheet: "utestatsall",
  sortFn: (a,b)=>(+b.PTS||0)-(+a.PTS||0)||(+b.G||0)-(+a.G||0)
});

renderTable({
  hostId: "playoff-goalie-stats",
  searchId: "searchPlayoffGoalies",
  updatedId: "updated-playoff-goalies",
  sheet: "malvaktsstatsall",
  sortFn: (a,b)=>(parseFloat(b.SVP)||0)-(parseFloat(a.SVP)||0)
});
</script>



<!-- üîπ REGLER FLIK 7 -->
<div id="regler" class="tab-panel">


  <h2>üìú Regler ‚Äì SEC Vinter-Uppv√§rmning 26</h2>
  <p>Officiella regler och riktlinjer f√∂r Svenska eHockey Cupens vinterturnering. Alla deltagare f√∂rv√§ntas k√§nna till och f√∂lja dessa regler under hela cupens g√•ng.</p>

  <div class="info-card" style="padding:18px 20px;margin-top:18px;line-height:1.55;">

    <h3>‚ö° Snabbinfo</h3>
    <ul>
      <li><strong>Krav:</strong> Tre (3) skandinaviska kaptener, minst sju (7) spelare.</li>
      <li><strong>Max:</strong> tolv (12) spelare per lag.</li>
      <li>Fritt deltagande ‚Äì inga restriktioner f√∂r h√∂gre divisioner eller utl√§ndska spelare (s√• l√§nge laget √§r skandinaviskt).</li>
      <li><strong>Datum:</strong> Gruppspel 7‚Äì19 okt | Transfer-deadline 10 okt 23:59 | Slutspel 20‚Äì26 okt.</li>
      <li><strong>Slutspel:</strong> Top 4-lag g√•r vidare | Best-of-5-format.</li>
    </ul>

    <h3>üìò F√∂rord</h3>
    <p>V√§lkommen till de officiella reglerna f√∂r SEC Vinter-Uppv√§rmning 26. Turneringen f√∂ljer <em>ECL ‚Äô25: Spring-regelverket</em> med egna till√§gg. Cupens administration (CA) ansvarar f√∂r att tolka och till√§mpa reglerna r√§ttvist. Alla lagkaptener ska k√§nna till regelverket i sin helhet.</p>

    <h3>üßæ Medlemsregistrering</h3>
    <ul>
      <li>Alla spelare m√•ste ha ett konto p√• SportsGamer.gg med korrekt PSN-ID eller Gamertag.</li>
      <li>Kontonamn f√•r inte vara st√∂tande eller ol√§mpliga.</li>
      <li>Genom att ansluta sig till ett lag godk√§nner spelaren alla regler.</li>
      <li>Endast ett konto per spelare √§r till√•tet.</li>
      <li>Spelare i samma hush√•ll ska meddela CA om de delar IP-adress.</li>
      <li>Alla ska ha korrekt nationalitet angiven p√• Playercard.</li>
    </ul>

    <h3>üèí Lagregistrering</h3>
    <ul>
      <li>Endast svenska, norska och danska medlemmar f√•r registrera lag.</li>
      <li>Lag ska ha minst 7 och max 12 spelare, varav 3 skandinaviska kaptener.</li>
      <li>Spelare avst√§ngda av SWEEHOCKEY eller SportsGamer f√•r inte delta.</li>
      <li>Registreringar blir bindande efter deadline.</li>
      <li>Lag som vill dra sig ur m√•ste meddela CA innan anm√§lningstiden g√•tt ut.</li>
      <li>Genom anm√§lan godk√§nner laget att logotyper och bilder f√•r anv√§ndas i s√§ndning och marknadsf√∂ring.</li>
      <li>Sponsorer f√•r inte st√• i konflikt med SportsGamers v√§rderingar eller vara verksamma inom alkohol-, tobak-, spel- eller vuxenunderh√•llning.</li>
    </ul>

    <h3>ü§ù Uppf√∂randekod</h3>
    <p>Alla deltagare ska upptr√§da respektfullt och undvika kr√§nkande spr√•k. Det √§r f√∂rbjudet att f√∂rs√∂ka kringg√• eller missleda CA. Lagkaptener ansvarar f√∂r lagets beteende och kommunikation.</p>

    <h3>üß† Lagledning & Administration</h3>
    <ul>
      <li>Lagledare ska schemal√§gga matcher, f√∂lja regler och kommunicera med CA.</li>
      <li>Cupens administration organiserar turneringen, tolkar regler och hanterar tvister.</li>
      <li>CA kan justera regler vid behov och fattar beslut genom majoritet.</li>
      <li>Aktuella medlemmar: eSwahn och DobbyTheJoker_ (med reservation f√∂r √§ndringar).</li>
    </ul>

    <h3>üìã Lagregler</h3>
    <ul>
      <li>Endast registrerade spelare f√•r anv√§ndas i matcher.</li>
      <li>Walkover (WO) kan utdelas vid uteblivet deltagande.</li>
      <li>Matcher kan annulleras om obeh√∂riga spelare deltar.</li>
    </ul>

    <h3>üèÖ Fair Play</h3>
    <p>Grundprincipen i SEC √§r sportslighet. Spelare f√•r inte utnyttja buggar, distrahera motst√•ndare eller upptr√§da osportsligt.</p>
    <p><strong>Det √§r f√∂rbjudet att:</strong></p>
    <ul>
      <li>Utnyttja buggar (t.ex. frysningar eller de-syncs).</li>
      <li>Initiera slagsm√•l f√∂re faceoff.</li>
      <li>L√§mna m√•lg√•rden f√∂r att st√∂ra motst√•ndare.</li>
      <li>Blockera spelare utan puck eller ‚Äúf√•nga‚Äù dem bakom m√•l.</li>
    </ul>

    <h3>‚è∞ Schemal√§ggning</h3>
    <ul>
      <li>Matcher spelas enligt SportsGamer.gg-schemat.</li>
      <li>Matcher f√•r flyttas om b√•da lag godk√§nner det i f√∂rv√§g.</li>
      <li>Lag ska f√∂rs√∂ka kontakta motst√•ndare minst 12‚Äì24 h innan match.</li>
      <li>Max 1 uppskjutning per match.</li>
      <li>Matcher ska vara rapporterade senast 23:59 CET p√• s√§songens slutdatum.</li>
      <li>Lag som spelar f√§rre √§n 80 % av matcherna riskerar diskvalificering.</li>
      <li>Hemmalaget b√∂rjar serien p√• hemmaplan enligt schemat.</li>
    </ul>

    <h3>üéÆ Spelregler</h3>
    <ul>
      <li>Alla matcher spelas 6 mot 6 (Privat Game).</li>
      <li>Periodl√§ngd: 4 minuter.</li>
      <li>Po√§ngsystem: 3 p vinst | 2 p OT-vinst | 1 p OT-f√∂rlust | 0 p f√∂rlust.</li>
      <li>Tiebreakers: PPG ‚Üí Segrar ‚Üí Inb√∂rdes ‚Üí GD ‚Üí Gjorda m√•l.</li>
      <li>F√∂rbjudna traits: Truculence och Big Tipper.</li>
    </ul>

    <h3>üéΩ Kl√§dregler & Arenor</h3>
    <ul>
      <li>Lag ska ha tv√• tr√∂jdesigner ‚Äì m√∂rk f√∂r hemmaplan, ljus f√∂r bortaplan.</li>
      <li>Bortalag byter vid f√§rgkrock.</li>
      <li>M√•lvakter f√•r anv√§nda ‚ÄúCHEL‚Äù-utrustning fritt.</li>
      <li>Arenorna Junior Stadium 1 och 2 √§r f√∂rbjudna.</li>
      <li>M√•lstolpar ska vara r√∂da (standardf√§rg).</li>
      <li>Inga icke-m√§nskliga karakt√§rer √§r till√•tna.</li>
    </ul>

    <h3>‚öôÔ∏è Matchhantering & Fr√•nkoppling</h3>
    <ul>
      <li>Matcher f√•r avbrytas inom 2 minuter vid lagg eller disconnect.</li>
      <li>Endast 2 omstarter till√•tna ‚Äì vid tredje m√•ste matchen spelas klart.</li>
      <li>Statistik fr√•n delade matcher ska sl√•s samman i rapporten.</li>
      <li>Bortkoppling av m√•lvakt under breakaway ‚Üí simulerat straff vid omstart.</li>
      <li>Lagen ska f√∂rs√∂ka l√∂sa problem gemensamt innan CA involveras.</li>
    </ul>

    <h3>üîÑ √ñverg√•ngar</h3>
    <ul>
      <li>Spelare f√•r inte byta lag under SEC.</li>
      <li>Deadline f√∂r free agents: 10 okt 23:59 CE(S)T.</li>
      <li>Diskvalificerade lags kaptener st√§ngs av fr√•n n√§sta cup som lagkaptener.</li>
    </ul>

    <h3>üìä Matchrapportering</h3>
    <ul>
      <li>All statistik ska motsvara spelets data exakt.</li>
      <li>Sk√§rmdumpar p√• statistik, matchh√§ndelser och spelarstatistik ska sparas.</li>
      <li>Rapportering ska ske inom angiven tidsgr√§ns.</li>
    </ul>
  </div>
</div>

<!DOCTYPE html>
<!DOCTYPE html>
<!-- H√§r √§r S√ñKRUTAN fr√•n lagkortet, flyttad och redo att anv√§ndas i SEC19_5 -->

<!-- S√ñK: LAG + SPELARE -->
<div class="player-search-centered">
  <div class="search-title">S√∂k lag &amp; spelare</div>
  <div class="search-wrapper">
    <input id="globalSearch" placeholder="S√∂k lag eller spelare">
    <div id="globalResults"></div>
  </div>
</div>

<!-- L√§gg detta i SEC19_5.html p√• samma plats som den nuvarande s√∂krutan -->

<!-- CSS fr√•n lagkortet (l√§gg i <style> i HEAD i SEC19_5.html) -->
<style>
/* S√ñKMODUL ‚Äì lag + spelare (fr√•n lagkort) */
.player-search-centered {
  margin: 40px auto 10px auto;
  width: 50%;
  max-width: 550px;
  min-width: 260px;
  border-radius: 22px;
  text-align: center;
  background:
    radial-gradient(circle at top, rgba(255,255,255,0.05) 0, transparent 55%),
    linear-gradient(180deg, #050718, #02030a 70%, #000);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 20px 18px 22px;
}
.search-title {
  font-size: .92rem;
  text-transform: uppercase;
  letter-spacing: .12em;
  font-weight: 600;
  color: var(--sec-text-muted);
  margin-bottom: 6px;
}
.player-search-centered .search-wrapper {
  position: relative;
}
#globalSearch {
  width: 100%;
  padding: 12px 16px;
  border-radius: 14px;
  border: 1px solid rgba(245,216,110,.7);
  background: rgba(2,4,18,0.95);
  color: #fff;
  font-size: .95rem;
}
#globalSearch::placeholder {
  color: rgba(180,183,216,0.75);
}
#globalResults {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  width:100%;
  background:#090b17;
  border:1px solid rgba(255,215,0,.25);
  border-radius:14px;
  display:none;
  max-height:260px;
  overflow-y:auto;
  z-index:100;
}
.search-item {
  padding:9px 14px;
  color:#ddd;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.search-item:hover {
  background:rgba(255,215,0,.08);
  color:#f5d86e;
}
.search-pill {
  font-size:.75rem;
  padding:2px 7px;
  border-radius:999px;
  border:1px solid rgba(245,216,110,.7);
  color:#f5d86e;
}
.search-sub {
  font-size:.78rem;
  color:var(--sec-text-muted);
}
</style>

<script>
(function() {
  const API =
    "https://script.google.com/macros/s/AKfycbwUvylvIbUTy4_zihW5_OKIsQME2vxcPHWLldObZI28dggqJytvF2UmdsAD4Ib5Zre1/exec";

  // valfritt: fyll p√• med kod -> fullst√§ndigt lagnamn
  const TEAM_MAP = {
    // "FBK": "F√§rjestad BK",
    // "LHF": "Lule√• HF",
    // ...
  };

  function norm(s) {
    return String(s || "")
      .toLowerCase()
      .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
      .replace(/\s+/g, "")
      .replace(/[^a-z0-9]/g, "");
  }

  function extractCupNumber(c) {
    if (!c) return "";
    return String(c).replace("SEC", "").trim().split(" ")[0];
  }

  async function initGlobalSearch() {
    const inp = document.getElementById("globalSearch");
    const box = document.getElementById("globalResults");
    if (!inp || !box) return;

    let items = [];
    const players = new Set();
    const teamCups = {}; // teamName -> Set of cups

    try {
      const [uteRes, mvRes] = await Promise.all([
        fetch(API + "?sheet=utestatsall").then(r => r.json()),
        fetch(API + "?sheet=m√•lvaktsstatsall").then(r => r.json())
      ]);

      // ===== UTE-SPELARE =====
      (function () {
        const h = uteRes[0];
        const iPlayer = h.indexOf("PLAYERS");
        const iTeam   = h.indexOf("TEAM");
        const iCup    = h.indexOf("CUP");

        for (let i = 1; i < uteRes.length; i++) {
          const r = uteRes[i];
          if (!r) continue;

          const rawName = r[iPlayer];
          if (!rawName) continue;

          const name = rawName.replace(/,\s*SWE/i, "").trim();
          const fullTeam = TEAM_MAP[r[iTeam]] || r[iTeam];
          const cup = extractCupNumber(r[iCup]);

          // Registrera lag + cup
          if (!teamCups[fullTeam]) teamCups[fullTeam] = new Set();
          teamCups[fullTeam].add(cup);

          // Spelare ‚Äî undvik dubletter
          const key = norm(name);
          if (!players.has(key)) {
            players.add(key);
            items.push({
              type: "player",
              label: name,
              sub: "",
              player: name
            });
          }
        }
      })();

      // ===== M√ÖLVAKTER =====
      (function () {
        const h = mvRes[0];
        const iGoalie = h.indexOf("GOALIES");
        const iTeam   = h.indexOf("TEAM");
        const iCup    = h.indexOf("CUP");

        for (let i = 1; i < mvRes.length; i++) {
          const r = mvRes[i];
          if (!r) continue;

          const rawName = r[iGoalie];
          if (!rawName) continue;

          const name = rawName.replace(/,\s*SWE/i, "").trim();
          const fullTeam = TEAM_MAP[r[iTeam]] || r[iTeam];
          const cup = extractCupNumber(r[iCup]);

          // Registrera lag + cup
          if (!teamCups[fullTeam]) teamCups[fullTeam] = new Set();
          teamCups[fullTeam].add(cup);

          // Spelare utan dubletter
          const key = norm(name);
          if (!players.has(key)) {
            players.add(key);
            items.push({
              type: "player",
              label: name,
              sub: "",
              player: name
            });
          }
        }
      })();

      // ===== LAG =====
      for (const teamName of Object.keys(teamCups)) {
        for (const cup of teamCups[teamName]) {
          items.push({
            type: "team",
            label: teamName,
            sub: `SEC ${cup}`,
            team: teamName,
            cup: cup
          });
        }
      }

    } catch (e) {
      console.error("Search-fel:", e);
    }

    // ===== RENDER =====
    function render(list) {
      if (!list.length) {
        box.style.display = "none";
        return;
      }

      box.style.display = "block";

      box.innerHTML = list
        .map(it => `
          <div class="search-item"
            data-type="${it.type}"
            data-team="${it.team || ""}"
            data-player="${it.player || ""}"
            data-cup="${it.cup || ""}"
          >
            <div>
              ${
                it.type === "team"
                  ? `<div>${it.label} ‚Äì <span class="search-sub">${it.sub}</span></div>`
                  : `<div>${it.label}</div>`
              }
            </div>
            <div class="search-pill">${it.type === "team" ? "Lag" : "Spelare"}</div>
          </div>
        `)
        .join("");

      // Klickh√§ndelser
      box.querySelectorAll(".search-item").forEach(el => {
        el.onclick = () => {
          const type = el.dataset.type;

          if (type === "team") {
            const t = el.dataset.team;
            const c = el.dataset.cup;
            location.href =
              `lagkort.html?team=${encodeURIComponent(t)}&cup=${encodeURIComponent(c)}`;
          } else {
            const p = el.dataset.player;
            location.href =
              `players?player=${encodeURIComponent(p)}`;
          }
        };
      });
    }

    // Input-h√§ndelse
    inp.addEventListener("input", () => {
      const q = norm(inp.value.trim());
      if (!q) {
        render([]);
        return;
      }

      const result = items
        .filter(it => norm(it.label).includes(q))
        .slice(0, 40);

      render(result);
    });

    // Klick utanf√∂r ‚Üí st√§ng
    document.addEventListener("click", e => {
      if (!box.contains(e.target) && e.target !== inp) {
        box.style.display = "none";
      }
    });
  }

  // K√∂r direkt (scriptet ligger efter HTML:n)
  initGlobalSearch();
})();
</script>

<script>
document.querySelectorAll(".cup-tabs .tab").forEach(tab => {
  tab.addEventListener("click", () => {
    // 1. Avmarkera aktiva tabbar
    document.querySelectorAll(".cup-tabs .tab").forEach(t =>
      t.classList.remove("active")
    );

    // 2. Markera klickad tab
    tab.classList.add("active");

    // 3. D√∂lj alla paneler
    document.querySelectorAll(".tab-panel").forEach(panel =>
      panel.classList.remove("active")
    );

    // 4. Visa r√§tt panel
    const target = tab.getAttribute("data-target");
    const panel = document.getElementById(target);
    if (panel) panel.classList.add("active");
  });
});
</script>
<script>
document.querySelectorAll(".team-card").forEach(card => {
    card.addEventListener("click", () => {
        const teamKey = card.dataset.team;

        // Mappa data-team till exakt lagnamn
        const TEAM_NAMES = {
            modo: "Modo Hockey",
            ssk: "SSK Academy",
            sunne: "Sunne IK Esport",
            surte: "Surte Sisu HC",
            veteran: "Veterankraft",
            vnexs: "vNexs Vipers"
        };

        const teamName = TEAM_NAMES[teamKey];
        const cup = "19.5"; // eftersom detta √§r cupsidan f√∂r SEC 19.5

        if (teamName) {
            // √ñppna lagkort
            window.location.href = `lagkort.html?team=${encodeURIComponent(teamName)}&cup=${cup}`;
        }
    });
});
</script>
<script>
// L√§nka lag i MATCHER-fliken till lagkortet f√∂r SEC 19.5
(function () {
  const CUP_PARAM = "19.5";

  function linkify(el) {
    if (!el) return;
    const name = el.textContent.trim();
    if (!name) return;
    const url = `lagkort.html?team=${encodeURIComponent(name)}&cup=${encodeURIComponent(CUP_PARAM)}`;
    el.innerHTML = `<a href="${url}" style="color:inherit; text-decoration:none;">${name}</a>`;
  }

  document.addEventListener("DOMContentLoaded", function () {
    // Matchkort (√∂verst i MATCHER-fliken)
    document.querySelectorAll('#matcher .match-card .team').forEach(linkify);
    // Statisk matchtabell i MATCHER-fliken
    document.querySelectorAll('#matcher .match-table .match-team').forEach(linkify);
  });
})();
</script>

</body>
</html>




































